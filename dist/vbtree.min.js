var vbtree;!function(){"use strict";var r={n:function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,{a:t}),t},d:function(n,t){for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},o:function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},r:function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},n={};r.r(n),r.d(n,{array_index:function(){return t},array_permutations:function(){return e},roots_flatten:function(){return a},tree_ancestors:function(){return l},tree_common_ancestor:function(){return p},tree_descendants:function(){return s},tree_diff:function(){return v},tree_find_shifts:function(){return m},tree_finder_make:function(){return x},tree_flatten:function(){return E},tree_from_array:function(){return c},tree_from_string:function(){return j},tree_insert:function(){return I},tree_intersect:function(){return M},tree_map_orig:function(){return u},tree_move:function(){return P},tree_move_after:function(){return D},tree_move_before:function(){return U},tree_move_into:function(){return K},tree_move_v2:function(){return L},tree_node_next:function(){return q},tree_node_prev:function(){return V},tree_pointer_shift:function(){return g},tree_print:function(){return B},tree_random:function(){return J},tree_resolve:function(){return Q},tree_shift:function(){return R},tree_sort_preorder:function(){return Y},tree_walk_preorder:function(){return o},tree_walk_preorder_prefix:function(){return X},tree_walk_preorder_rev:function(){return rr}});var t=function(r,n){var t={};return r.forEach((function(r){return t[n(r)]=r})),t},e=function(r){for(var n=r.length,t=[r.slice()],e=new Array(n).fill(0),i=1;i<n;)if(e[i]<i){var o=i%2&&e[i],a=r[i];r[i]=r[o],r[o]=a,++e[i],i=1,t.push(r.slice())}else e[i]=0,++i;return t};function i(r){var n=!0,t=!0,e=!1;if(r.stack.push(r.node),"function"==typeof r.enter)switch(r.enter_retval=r.enter(r),r.enter_retval){case"END":n=!1,t=!1,e=!0;break;case"SKIP":n=!1,t=!1}if(n&&"function"==typeof r.visit)switch(r.visit_retval=r.visit(r),r.visit_retval){case"END":t=!1,e=!0;break;case"SKIP":t=!1}if(t)for(var o=r.node.children,a=0,u=o.length;a<u;++a)if(r.node=o[a],i(r)){e=!0;break}return r.node=r.stack.pop(),"function"==typeof r.leave&&(r.leave_retval=r.leave(r),"END"==r.leave_retval&&(e=!0)),e}var o=function(r){if(r.stack=r.stack||[],"function"!=typeof r.visit&&void 0===r.retval){var n=[];r.visit=function(r){return n.push(r.node)},r.retval=n}for(var t=0,e=r.roots.length;t<e&&(r.node=r.roots[t],!i(r));++t);return r.retval},a=function(r){return o({roots:r,retval:[],enter:function(r){var n=r.node;r.retval.push(n)},leave:function(r){var n=r.node;delete n.parent,delete n.children,delete n.siblings}})},u=function(r){return{id:r.id,parent_id:r.parent_id,orig:r}};function f(r){for(var n=[r.id],t=r;t;t=t.parent)if(n.push(t.parent_id),t.parent===r)throw new Error("Circular dependency detected: ".concat(n.join(" -> ")))}var c=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],t=[],e={},i=0,o=r.length;i<o;++i){var a=r[i];if(a.parent_id=a.parent_id||null,a.children=[],e[a.id])throw new Error("All rows should have unique ids");e[a.id]=a,a.parent=e[a.parent_id]||null,a.parent?(a.parent===a&&f(a),a.parent.children.push(a),a.siblings=a.parent.children):t.push(a)}for(var u={},c=0,l=t.length;c<l;++c){var d=t[c];if(d.parent=e[d.parent_id]||null,d.parent){u[d.parent_id]=u[d.parent_id]+1||0,d.parent.children.splice(u[d.parent_id],0,d),d.siblings=d.parent.children;for(var p=d;p;p=p.parent)p.parent===d&&f(d)}else n.push(d),d.siblings=n}return{roots:n,nodes:r,nodes_map:e}},l=function(r,n){for(var t=[],e=c(r.map(u)).nodes_map[n.parent_id];e;e=e.parent)t.push(e.orig);return t};function d(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var p=function(r){if(0==r.length)return null;var n,t=[];r.forEach((function(r){for(var n=[],e=r;e;e=e.parent)n.push(e);t.push(n.reverse())}));for(var e=Math.min.apply(Math,function(r){if(Array.isArray(r))return d(r)}(n=Object.values(t).map((function(r){return r.length})))||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(n)||function(r,n){if(r){if("string"==typeof r)return d(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(r,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=0;i<e;++i)for(var o=1;o<t.length;++o)if(t[o-1][i]!==t[o][i])return t[0][i-1];return t[0][e-2]||null},s=function(r,n){var e=0,i=[],a=t(n,(function(r){return r.id}));return o({roots:c(r.map(u)).roots,leave:function(r){var n=r.node;a[n.id]&&e--},visit:function(r){var n=r.node;e&&i.push(n.orig),a[n.id]&&e++}}),i},v=function(r,n){var e=[],i=t(n,(function(r){return r.id}));return o({roots:c(r.map(u)).roots,visit:function(r){var n=r.node;i[n.parent_id]&&(i[n.id]=!0),i[n.id]||e.push(n.orig)}}),e};function h(r,n){var t=r.indexOf(n);if(-1==t)return!1;for(var e=t,i=r.length;++e<i;)if(r[e].parent_id===n.parent_id)return!1;var o=r.findIndex((function(r){return r.id==n.parent_id}));return-1!=o&&(n.parent_id=r[o].parent_id,r.splice(t,1),r.splice(o+1-(t<o),0,n),!0)}function _(r,n){for(var t=r.indexOf(n),e=t;--e>=0;)if(r[e].parent_id===n.parent_id){for(var i=r[e],o=r.length;--o>0&&r[o].parent_id!==i.id;);return 0==o&&(o=e),n.parent_id=i.id,r.splice(t,1),r.splice(o+1-(t<o),0,n),!0}return!1}var m=function(r,n){var t={id:"__tree_find_shifts__:dummy1",parent_id:n.parent_id},e={id:"__tree_find_shifts__:dummy2",parent_id:n.parent_id},i=r.slice(),o=r.slice();i.splice(n.i,0,t),o.splice(n.i,0,e);for(var a=[];h(i,t);)a.push({i:i.indexOf(t),parent_id:t.parent_id||null});for(var u=[];_(o,e);)u.push({i:o.indexOf(e),parent_id:e.parent_id||null});return{shift_left:a,shift_right:u}};function y(r,n,t,e,i,o){for(var a=0,u={i:n,parent_id:t,shift_happened:a};e>0;){for(var f=n;--f>=0;){var c=r[f];if(c.parent_id==t){t=c.id;for(var l=r.length;--l>=0;)if(r[l].parent_id==t){n=l+1;break}--e,++a,i(f,r)&&(u.i=n,u.parent_id=t,u.shift_happened=a);break}}if(-1==f)break}return u}function b(r,n,t,e,i,o){for(var a=0,u={i:n,parent_id:t,shift_happened:a};e<0;){for(var f=n,c=r.length;f<c;++f){var l=r[f];if(l.parent_id==t&&!o[l.id])return u}for(var d=null,p=0,s=r.length;p<s;++p)if(r[p].id==t){d=p;break}if(null===d)break;++e,--a,n=d+1,t=r[d].parent_id,i(r.indexOf((function(r){return r.id==t})),r)&&(u.i=n,u.parent_id=t,u.shift_happened=a)}return u}var g=function(r,n,t,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},o=t==r.length?null:r[t].parent_id;return e<0?b(r,t,o,e,i,n):y(r,t,o,e,i)};function w(r,n,t){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.container_rect;if(null===r.i){var i=S(r.node_rects,t);r.x0=n,r.y0=t,r.xx0=r.node_rects[i.i].x,r.container_rect0=e}r.dx=n-r.x0,r.dy=t-r.y0,r.container_rect=e;var o=r.container_rect0.x-r.container_rect.x,a=r.container_rect0.y-r.container_rect.y;n+=o,t+=a;var u=k(r.node_rects.map((function(r){return r.y})).concat(r.container_rect0.y+r.container_rect.h),t);console.log("closest_i",u);var f=r.node_rects[u]||{x:(r.node_rects[A(r.node_rects.map((function(r){return r.y})))]||r.container_rect0).x,y:r.container_rect0.y+r.container_rect.h,w:r.container_rect0.w,h:0,node:null},c=r.nodes.indexOf(f.node),l=Math.round((r.xx0-f.x+r.dx)/r.shift_width),d=-1==c?r.nodes.length:c,p=g(r.nodes,r.selection_map,d,l,r.is_shift_allowed);return r.i=p.i,r.parent_id=p.parent_id,r.shift=p.shift_happened,{x:f.x+r.shift*r.shift_width-o,y:f.y-a,w:f.w-r.shift*r.shift_width,h:f.h,before:!0,shift:r.shift,node:r.nodes[c]||null,i:r.i,parent_id:r.parent_id}}function A(r){for(var n=Number.MAX_VALUE,t=0,e=0,i=r.length;e<i;++e){var o=r[0];n>o&&(n=o,t=e)}return t}function k(r,n){for(var t=Number.MAX_VALUE,e=0,i=0,o=r.length;i<o;++i){var a=Math.abs(n-r[i]);t>a&&(t=a,e=i)}return e}function S(r,n){for(var t=null,e=null,i=0,o=r.length;i<o;++i){var a=r[i],u=a.y,f=a.y+a.h;if(n>=u&&n<f){var c=n-u,l=f-n;if(null===t){t=c<=l?{i:i,r:a,d1:c,d2:l,top:!0,bottom:!1}:{i:i,r:a,d1:c,d2:l,top:!1,bottom:!0};continue}if(c<=l){if(t.top&&t.d1>c){t={i:i,r:a,d1:c,d2:l,top:!0,bottom:!1};continue}if(t.bottom&&t.d2>c){t={i:i,r:a,d1:c,d2:l,top:!0,bottom:!1};continue}}else{if(t.top&&t.d1>l){t={i:i,r:a,d1:c,d2:l,top:!1,bottom:!0};continue}if(t.bottom&&t.d2>l){t={i:i,r:a,d1:c,d2:l,top:!1,bottom:!0};continue}}}else if(null===t){var d=Math.abs(u-n),p=Math.abs(f-n);if(null!==e)if(d<=p){if(e.top&&e.d1>d){e={i:i,r:a,d1:d,d2:p,top:!0,bottom:!1};continue}e.bottom&&e.d2>d&&(e={i:i,r:a,d1:d,d2:p,top:!0,bottom:!1})}else{if(e.top&&e.d1>p){e={i:i,r:a,d1:d,d2:p,top:!1,bottom:!0};continue}e.bottom&&e.d2>p&&(e={i:i,r:a,d1:d,d2:p,top:!1,bottom:!0})}else e=d<=p?{i:i,r:a,d1:d,d2:p,top:!0,bottom:!1}:{i:i,r:a,d1:d,d2:p,top:!1,bottom:!0}}}return t||e}var x=function(r){return r.selection_map=t(r.selection,(function(r){return r.id})),r.i=null,r.parent_id=null,r.shift_width=r.shift_width||50,r.update=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return w.apply(void 0,[r].concat(t))},r},E=function(r){return a(r.roots)};function O(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}var j=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={id:null,children:[]},t=[],e={},i=O({},null,0),o=n;return r.split("\n").forEach((function(r){var a=r.trimLeft();if(""!=a){for(var u=r.length-a.length;o!==n&&i[o.id]>=u;)o=o.parent;a.split(",").forEach((function(r){for(var n=r,a=2;e[n]&&a<100;++a)n="".concat(r).concat(a);var f={id:n,parent_id:o.id,name:r,parent:o,children:[],siblings:o.children};i[n]=u,t.push(f),e[n]=f,o.children.push(f)})),o=t[t.length-1]}})),n.children.forEach((function(r){return r.parent=null})),{roots:n.children,nodes:t,nodes_map:e}},I=function(r,n,t,e){var i=[];return o({roots:c(n.map(u)).roots,visit:function(r){var n=r.node;1==r.stack.length&&(n.orig.parent_id=e),i.push(n.orig)}}),r.splice.apply(r,[t,0].concat(i)),r},M=function(r,n){var e=[],i=t(n,(function(r){return r.id}));return o({roots:c(r.map(u)).roots,visit:function(r){var n=r.node;i[n.parent_id]&&(i[n.id]=!0),i[n.id]&&e.push(n.orig)}}),e};function N(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var P=function(r,n,e,i){var o,a=M(r,n),u=t(a,(function(r){return r.id}));if(!u[i]){var f=[];n.forEach((function(r){return r.parent_id=i}));for(var c=0,l=0;l<r.length;++l){var d=r[l];u[d.id]?l<e&&c++:f.push(d)}f.splice.apply(f,[e-c,0].concat(function(r){if(Array.isArray(r))return N(r)}(o=a)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(o)||function(r,n){if(r){if("string"==typeof r)return N(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(r,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),r.splice.apply(r,[0,r.length].concat(f))}return r};function T(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var D=function(r,n){var t;r.forEach((function(r){r.parent&&(r.parent.children.splice(r.parent.children.indexOf(r),1),r.parent=null,r.parent_id=null)}));var e,i=n.parent.children.indexOf(n);(t=n.parent.children).splice.apply(t,[i+1,0].concat(function(r){if(Array.isArray(r))return T(r)}(e=r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(r,n){if(r){if("string"==typeof r)return T(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(r,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),r.forEach((function(r){r.parent=n.parent,r.parent_id=n.parent_id}))};function C(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var U=function(r,n){var t;r.forEach((function(r){r.parent&&(r.parent.children.splice(r.parent.children.indexOf(r),1),r.parent=null,r.parent_id=null)}));var e,i=n.parent.children.indexOf(n);(t=n.parent.children).splice.apply(t,[i,0].concat(function(r){if(Array.isArray(r))return C(r)}(e=r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(r,n){if(r){if("string"==typeof r)return C(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(r,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),r.forEach((function(r){r.parent=n.parent,r.parent_id=n.parent_id}))};function $(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var K=function(r,n){var t,e;r.forEach((function(r){r.parent&&(r.parent.children.splice(r.parent.children.indexOf(r),1),r.parent=null,r.parent_id=null)})),(t=n.children).splice.apply(t,[0,0].concat(function(r){if(Array.isArray(r))return $(r)}(e=r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(r,n){if(r){if("string"==typeof r)return $(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(r,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),r.forEach((function(r){r.parent=n,r.parent_id=n.id}))},L=function(r,n,t){},q=function(r){if(r.children.length)return r.children[0];for(var n=r,t=0;n;n=n.parent,++t){if(t>1e3)throw new Error("Too many iterations");var e=n.siblings[n.siblings.indexOf(n)+1];if(e)return e}return null},V=function(r){var n=r.siblings[r.siblings.indexOf(r)-1]||null;if(n)for(var t=0;n.children.length;++t){if(t>1e3)throw new Error("Too many iterations");n=n.children[n.children.length-1]}return n},X=function(r){return r.stack.map((function(n,t){var e=n.parent?n.parent.children:r.roots,i=t==r.stack.length-1;return n===e[e.length-1]?i?"└":" ":i?"├":"│"}))},z={"├":"├── ","│":"│   ","└":"└── "," ":"    "},B=function(r){var n=r.roots;return o({retval:"",roots:n,visit:function(r){r.retval+=X(r).map((function(r){return z[r]})).join("")+(r.node.title||r.node.id)+"\n"}})},F=faker,G=r.n(F);function H(r,n,t){for(var e=[],i=0,o=Math.floor(5*Math.random())+1;i<o;++i){for(var a=void 0,u=0;u<50&&t[a=G().lorem.word()];++u);if(t[a])throw new Error("No more unique words");t[a]=!0,e.push(" ".repeat(4*r)+a),r<n&&e.push(H(r+1,n,t))}return e.join("\n")}var J=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n={};return H(1,r,n)},Q=function(r,n,e,i){var a=!1,u=null,f={i:0,parent_id:null},l=t(r,(function(r){return r.id})),d=c(r.map((function(r,n){return{id:r.id,parent_id:l[r.parent_id]?r.parent_id:null,value:r,i:n}}))).roots;if(o({roots:d,visit:function(r){if(a)return f.i=r.node.i,u==r.node.parent_id&&(f.parent_id=r.node.parent_id),"END";if(r.node.id==n.id){if(u=r.node.id,!e)return f.i=r.node.i,f.parent_id=r.node.parent_id,"END";f.i=r.node.i+1,f.parent_id=r.node.parent_id,a=!0}}}),i>0){var p=m(r,f);return p.shift_right[Math.min(i,p.shift_right.length)-1]||f}if(i<0){var s=m(r,f);return s.shift_left[Math.min(-i,s.shift_left.length)-1]||f}return f},R=function(r,n,t){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};if(0==r.length)return{i:n,parent_id:null,shift_real:0};for(var i=0,o=n==r.length?null:r[n].parent_id,a=n;t>0;){for(var u=a;--u>=0;)if(r[u].parent_id==o){if(!e(u,r)){u=-1;break}o=r[u].id;for(var f=r.length;--f>=0;)if(r[f].parent_id==o){a=f+1;break}--t,++i;break}if(-1==u)break}for(;t<0;){for(var c=!1,l=a;++l<r.length;)if(r[l].parent_id==o){c=!0;break}if(c)break;c=!0;for(var d=0;d<r.length;++d)if(r[d].id==o){if(++t,--i,d<a){o=r[d].parent_id;for(var p=d;++p<a;)if(r[p].parent_id==o){a=p;break}c=!1;break}a=d+1,o=r[d].parent_id,c=!1;break}if(c)break}return{i:a,parent_id:o,shift_real:i}};function W(r,n){return r.id.localeCompare(n.id)}var Y=function r(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return n.sort(t).forEach((function(n){return r(n.children,t)})),n};function Z(r){var n=!0,t=!0,e=!1;if(r.stack.push(r.node),"function"==typeof r.enter)switch(r.enter_retval=r.enter(r),r.enter_retval){case"END":n=!1,t=!1,e=!0;break;case"SKIP":n=!1,t=!1}if(n&&"function"==typeof r.visit)switch(r.visit_retval=r.visit(r),r.visit_retval){case"END":t=!1,e=!0;break;case"SKIP":t=!1}if(t)for(var i=r.node.children,o=i.length;o-- >0;)if(r.node=i[o],Z(r)){e=!0;break}return r.node=r.stack.pop(),"function"==typeof r.leave&&(r.leave_retval=r.leave(r),"END"==r.leave_retval&&(e=!0)),e}var rr=function(r){r.stack=r.stack||[];for(var n=r.roots.length;n-- >0&&(r.node=r.roots[n],!Z(r)););return r.retval};vbtree=n}();